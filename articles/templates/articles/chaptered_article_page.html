{% extends "base.html" %}
{% load static article_tags core_tags wagtailcore_tags wagtailimages_tags %}

{% block content %}

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <style>

    .gap-page h1 {
      font-size: 36px; }

    .gap-page h2 {
      font-size: 24px;
      margin-top: 0px; }

    .gap-page h3 {
      font-size: 18px;
      color: #bf1e2e;
      margin-top: 0px; }

    .gap-page h4 {
      font-size: 14px;
      font-weight: bold;
      text-transform: uppercase; }

    .gap-page h5, .gap-page h6 {
      font-weight: bold;
      font-size: 14px; }

    .gap-page a, .gap-page a:hover {
      color: #bf1e2e; }

    .gap-page img {
      display: block;
      max-width: 100%;
      height: auto; }

    .gap-page ul,
    .gap-page ul li{
        list-style: none;
    }

    .gap-page .top-link {
        color: #bf1e2e;
        text-align: right;
        display: block;
        margin-right: 10%;
    }
    .gap-page .toc ul,
    .gap-page article h2,
    .gap-page .block-ColumnedContent,
    .gap-page .block-end_note,
    .gap-page .block-citation,
    .gap-page .block-Image,
    .gap-page .block-Paragraph,
    .gap-page .block-Heading,
    .gap-page .block-Image,
    .gap-page .block-Sharable,
    .gap-page .block-Embed,
    {
        margin-left: 10%;
        margin-right: 10%
    }

    .gap-page .block-Overflow .block-ColumnedContent,
    .gap-page .block-Overflow .block-Image,
    .gap-page .block-Overflow .block-Paragraph,
    .gap-page .block-Overflow .block-sharable
    {
        margin-left: 0;
        margin-right: 0;
    }
    .gap-page article h2 {
        margin-top: 3%;
    }

    .gap-page article .block-Quote,
    .gap-page article .block-Sharable {
        border-left: solid #bf1e2e 5px;
        color: lightgray;
        margin-left: 15%;
        margin-right: 15%
    }

    .gap-page article .block-Sharable .quote,
    .gap-page article .block-Sharable,
    .gap-page article .block-Quote .quote,
    .gap-page article .block-Quote {
        vertical-align: middle;
    }

    .gap-page article .block-Quote .quote,
    .gap-page article .block-Sharable .quote
    {
        padding-left: 30px;
        font-size: 14px;
        line-height: 120%;

    }
    .gap-page article .block-PullQuote {
        display: inline-block;
        width: 33%;
        float: right;
        font-size: 28px;
        padding: 20px;
        margin: 10px;
        background-color: #f6f6f6;
        line-height: 120%;
    }

    .gap-page .toc ul{
        background-color: #f6f6f6;
        padding-top: 30px;
        padding-bottom: 30px;
        padding-left: 40px;
        padding-right: 40px;
    }

    .gap-page .toc li {
        margin: 3px;
    }
    .gap-page .toc ul li i {
        color: grey;
        font-size: 0.75em;
        padding-right: 5px;
    }

    .gap-page .image {
        position: relative;
        border: 4px solid #f6f6f6;
        margin-bottom: 10px;
        margin-top: 10px;
    }

    .gap-page .image-label{
        float: right;
        color: #bf1e2e;
    }

    .gap-page .photo-zoom {
        color: #bf1e2e;
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 18px;
    }

    .gap-page .clickable {
        cursor: pointer;
    }

    .gap-page .end-notes li {
        list-style: none;
        line-height: 1.5em;
        text-indent: -2em;
    }

    .gap-page .end-notes .identifier {
        float: left;
        width: 2em;
    }

    .gap-page .block-citation,
    .gap-page .block-end_note ul li{
        padding-top: 5px;
        padding-bottom: 5px;
        color: #c0c0c0;
    }

    .gap-page article .block-Image .image {
        margin: 0 0 10px 0; }

    .gap-page article .block-Image .credit {
          margin-top: 10px;
          font-size: 0.8em;
          text-transform: uppercase;
          color: #666; }

    .gap-page article .block-Image .left-aligned {
      float: left;
      margin: 5px 20px 20px 0; }

    .gap-page article .block-Image .right-aligned {
  float: right;
  margin: 5px 0px 20px 20px; }
    .gap-page article .block-Image .full-width img {
  margin: 0 auto; }

 .gap-page article .block-Image .full-width .credit {
  text-align: center; }

    </style>
    <div id="article-page" class="container gap-page">
        <article>
            <div class="title">
                {% if self.primary_topic %}
                    <div class="primary-topic">
                        <i class="fa fa-tags"></i>
                        <a href="{% topic_url self.primary_topic %}">{{ self.primary_topic.name }}</a>
                    </div>
                {% endif %}

                <h1>{{ self.title }}</h1>
                <h2>{{ self.excerpt|richtext }}</h2>

                <div class="contributors">By:
                    {% for author in self.authors %}
                    <div class="contributor">
                        <a href="{{ author.url }}">{{ author.first_name }} {{ author.last_name }}</a>
                    </div>{% endfor %}</div>
                <div class="date"> / {{ self.first_published_at|date:"F j, Y" }}</div>
            </div>
            <figure class="main-image">
                {% image self.main_image width-940 %}
            </figure>
            <ul class="share-links">
                <li class="facebook"><span class="facebook-share-link" data-url="{{ self.url }}"><i class="fa fa-facebook"></i></span></li>
                <li class="twitter"><a href="https://twitter.com/share?text={{ self.title }}"><i class="fa fa-twitter"></i></a></li>
                <li class="print"><a href="javascript:window.print()"><i class="fa fa-print"></i></a></li>
                <li class="email"><a HREF="mailto:?subject={{ self }}&body={{ self.url }}"><i class="fa fa-envelope"></i></a></li>
            </ul>
            <div class="story">
                {{ self.body }}

                <div class="toc">
                <h2 id="toc">Table of Contents</h2>
                <ul class="fa-ul">
                    {% for chapter in self.chapters %}
                        <li><i class="fa fa-li fa-chevron-down"></i><a href="#{{ chapter.value.heading|slugify }}">{{ chapter.value.heading }}</a></li>
                    {% endfor %}
                </ul>

                </div>

                {% if self.chapters %}
                {{ self.chapters }}
                {% endif %}

                {% if self.works_cited %}
                    <h2>Works Cited</h2>
                    {{ self.works_cited }}
                {% endif %}

                {% if self.end_notes %}
                    <h2>End Notes</h2>
                    <ul class="end-notes">{{ self.end_notes }}</ul>

                {% endif %}

                <div class="home-link"><a href="/"><img src="{% static 'img/opencanada-mark.png' %}"></a></div>
            </div>

            {% if self.topics %}
                <div class="topics related">
                    <div class="topic-label"><i class="fa fa-tags"></i> Topics:</div>
                    <ul class="list-inline">
                        {% for topic in self.topics %}
                            <li><a href="{% topic_url topic %}">{{ topic }}</a></li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
        </article>

        {% if self.series_articles %}
        <section class="in-the-series">
            <h2>Also in the series</h2>
            {% for series, articles in self.series_articles %}
                <div class="series-teaser">
                    <h3><a href="{{ series.url }}">{{ series.title }}</a></h3>
                    {{ series.subtitle|richtext }}
                </div>
                {% block in_the_series %}
                    {% include 'articles/includes/in_the_series.html' %}
                {% endblock %}
            {%  endfor %}
        </section>
        {% endif %}

        {% block related_articles %}
            {% with article_count=3 %}
                {% include 'articles/includes/related_articles.html' %}
            {% endwith %}
        {% endblock %}
    </div>


{% endblock %}
