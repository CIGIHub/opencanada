{% extends "base.html" %}
{% load static article_tags compress core_tags wagtailcore_tags wagtailembeds_tags wagtailimages_tags %}

{% block body_class %}template-{{ self.get_verbose_name|slugify }}{% endblock %}

{% block theme_css %}
    <link rel="stylesheet" type="text/x-scss" href="{% static 'themes/exceptionalism/css/exceptionalism.scss' %}">
{% endblock %}

{% block extra_js %}
        <script>
            FeatureStyles.MainFeatures.setSize({{ self.full_bleed_image_size }});
        </script>
        <script type="text/javascript" src="{% static 'themes/components/js/transparency.js' %}"></script>
        <script type="text/javascript" src="{% static 'themes/exceptionalism/js/exceptionalism.js' %}"></script>
{% endblock %}

{% block header %}
    {% include 'themes/exceptionalism/header.html' with tagline=False %}
{% endblock %}

{% block content %}

    {% if self.main_image and self.include_main_image_overlay %}
        {% include 'themes/exceptionalism/articles/includes/article-feature.html' with metadata='themes/exceptionalism/articles/includes/article-metadata.html' %}
    {% endif %}

    <article id="article-page">
        <div class="story">
            {% include 'articles/includes/json-embed.html' %}
            {% include 'themes/exceptionalism/articles/includes/story-content.html' %}
            {% include 'themes/exceptionalism/articles/includes/advanced_content.html' %}
        </div>
    </article>

{% endblock %}

{% block footer %}
    <footer>
        {% for block in self.body %}
            {% if block.block_type == 'RelatedItems' %}
                <div class="container-clear-none">
                    <section class="block-{{ block.block_type }} narrow-content">
                        {{ block }}
                    </section>
                </div>
            {% endif %}
        {% endfor %}
   </footer>
{% endblock %}
