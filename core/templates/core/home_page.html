{% extends "base.html" %}

{% load static core_tags wagtailcore_tags article_tags wagtailimages_tags %}

{% block body_class %}template-{{ self.get_verbose_name|slugify }}{% endblock %}

{% block feature %}
    {% include 'core/main-feature.html' %}
{% endblock %}


{% block content %}
    <div class="container features" id="features">

        {% for row in self.articles %}
            <div class="row">
            {%  for article in row %}
                <div class="col-sm-{{ row|column_class }}">

                    {% if article.feature_style.include_image and article.feature_style.overlay_text %}
                        <div class="overlay-feature" style="height: 300px">
                            {% image article.main_image original as background_image %}
                            <div class="feature-image" style="background-image: url(' {{ background_image.url }} ')">
                                <div class="feature-image-overlay" style="background: rgba( {{ article.image_overlay_color.rgb }}, {{ article.opacity }} )"></div>
                            </div>
                            <div class="feature-text">
                                <h2><a style="color: {{ self.typed_featured_item.font_style.text_colour.hex_value }};" href="{{ article.url }}">{{ article.title }}</a></h2>
                                {% include "core/includes/homepage_teaser.html" %}
                            </div>
                        </div>

                    {% elif article.feature_style.include_image and not article.feature_style.overlay_text %}
                        <div class="image-feature">
                            <figure>{%  image article.main_image width-285 %}</figure>
                            <h2><a href="{{ article.url }}">{{ article.title }}</a></h2>
                            {% include "core/includes/homepage_teaser.html" %}
                        </div>

                    {% else %}
                        <div class="simple-feature">
                            <h2><a href="{{ article.url }}">{{ article.title }}</a></h2>
                            {% include "core/includes/homepage_teaser.html" %}
                        </div>
                    {% endif %}


                </div>

                {% endfor %}
            </div>
        {% endfor %}
    </div>

{% endblock %}
